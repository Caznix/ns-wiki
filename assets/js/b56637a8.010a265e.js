"use strict";(self.webpackChunkns_wiki=self.webpackChunkns_wiki||[]).push([[8541],{259:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var t=n(4848),r=n(8453);const i={},s=void 0,a={id:"reference/respawn/topology",title:"topology",description:"Topologies \\-\\-\\-\\-\\--",source:"@site/docs/reference/respawn/topology.md",sourceDirName:"reference/respawn",slug:"/reference/respawn/topology",permalink:"/ns-wiki/docs/reference/respawn/topology",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/reference/respawn/topology.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Titan",permalink:"/ns-wiki/docs/reference/respawn/titan"},next:{title:"Asset Types",permalink:"/ns-wiki/docs/repak/"}},l={},c=[];function p(e){const o={blockquote:"blockquote",code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.p,{children:"Topologies ------"}),"\n",(0,t.jsx)(o.p,{children:"RUI elements are rendered on topologies."}),"\n",(0,t.jsx)(o.p,{children:"The position of topologies are relative to the position of their parent."}),"\n",(0,t.jsx)(o.p,{children:"Since the number of topologies that can be created is very limited and\r\nVanilla uses most of the slots already, try to minimize your topology\r\nuses. Instead of creating new ones, check if you can use one that\r\nalready exists:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"clGlobal.topoFullScreen\r\nclGlobal.topoCockpitHudPermanent\r\nclGlobal.topoTitanCockpitLowerHud\r\nclGlobal.topoTitanCockpitInstrument1 // yes, with a 1\r\nclGlobal.topoTitanCockpitHud\r\nclGlobal.topoCockpitHud\n"})}),"\n",(0,t.jsx)(o.p,{children:"Creating Topologies ^^^^^^"}),"\n",(0,t.jsxs)(o.blockquote,{children:["\n",(0,t.jsx)(o.p,{children:"This creates a simple topology at the specified origin relative to the\r\nparent position."}),"\n",(0,t.jsxs)(o.p,{children:["The parameters ",(0,t.jsx)(o.code,{children:"right"})," and ",(0,t.jsx)(o.code,{children:"down"})," specify the dimensions of the\r\ntopology relative to the origin. For example, passing\r\n",(0,t.jsx)(o.code,{children:"<GetScreenSize()[0],0,0>"})," and ",(0,t.jsx)(o.code,{children:"<0,GetScreenSize()[1],0>"})," will create\r\na topology that covers the entire screen. Note that in this example\r\nthe origin is the top left corner. The unit used is pixels."]}),"\n"]}),"\n",(0,t.jsxs)(o.blockquote,{children:["\n",(0,t.jsxs)(o.p,{children:["This destroys the passed topology. However, ruis that are already\r\ndrawn on top of it do ",(0,t.jsx)(o.strong,{children:"not"})," get destroyed."]}),"\n"]}),"\n",(0,t.jsxs)(o.blockquote,{children:["\n",(0,t.jsx)(o.p,{children:"Parents the given topology to the anchor entity. The topology moves\r\nand rotates relative to the parent."}),"\n",(0,t.jsxs)(o.p,{children:["Set the position of the topology to ",(0,t.jsx)(o.code,{children:"<0,0,0>"})," to render at the\r\nparent's position."]}),"\n"]}),"\n",(0,t.jsxs)(o.blockquote,{children:["\n",(0,t.jsx)(o.p,{children:"Update the position and dimensions of the topology"}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:"Drawcalls ^^^^^^"}),"\n",(0,t.jsx)(o.p,{children:"Drawcalls determine how and where RUIs on a topology are being rendered."}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.code,{children:"RUI_DRAW_NONE"}),": Don't render rui at all"]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.code,{children:"RUI_DRAW_HUD"}),": Render rui on screen. Uses screen coordinates in\r\npixels."]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.code,{children:"RUI_DRAW_WORLD"}),": Render rui in worldspace on a two dimensional\r\nsurface facing the direction of the topology."]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.code,{children:"RUI_DRAW_COCKPIT"}),": Similiar to ",(0,t.jsx)(o.code,{children:"RUI_DRAW_HUD"})," but follows the\r\ncockpit headbob movement."]}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.strong,{children:"Drawcalls are not set for a topology but for each rui individually"})}),"\n",(0,t.jsx)(o.p,{children:"HUD Topology example ^^^^^^"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:'// Cover the top left quadrant of the screen with a basic image\r\nfloat[2] s = GetScreenSize()\r\nvar topo = RuiTopology_CreatePlane( <0,0,0>, <s[0] / 2,0,0>, <0,s[1] / 2,0>, true ) // RUIs scale with the topology they are being drawn on so make sure to use the correct dimensions\r\nRuiCreate( $"ui/basic_image.rpak", topo, RUI_DRAW_HUD, 0 )\n'})}),"\n",(0,t.jsx)(o.p,{children:"Worldspace Topology example ^^^^^^"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:'// REMEMBER TO DESTROY ALL TOPOS, RUIS AND PROPS YOU CREATE WHEN YOU NO LONGER NEED THEM\r\n// ripped from respawn\r\nvar function Worldspace_CreateRUITopology( vector org, vector ang, float width, float height )\r\n{\r\n    // adjust so the RUI is drawn with the org as its center point\r\n    org += ( (AnglesToRight( ang )*-1) * (width*0.5) )\r\n    org += ( AnglesToUp( ang ) * (height*0.5) )\r\n\r\n    // right and down vectors that get added to base org to create the display size\r\n    vector right = ( AnglesToRight( ang ) * width )\r\n    vector down = ( (AnglesToUp( ang )*-1) * height )\r\n\r\n    return RuiTopology_CreatePlane( org, right, down, true )\r\n}\r\n\r\nvoid function WorldSpaceTopoTest()\r\n{\r\n    // To rotate a topology without manually calculating and updating position and dimensions you can parent the topology to  a client side prop\r\n    entity player = GetLocalClientPlayer()\r\n    entity weapon = player.GetActiveWeapon()\r\n\r\n    vector fwd = AnglesToForward( weapon.GetAngles() )\r\n    vector right = AnglesToRight( weapon.GetAngles() )\r\n    vector up = AnglesToUp( weapon.GetAngles() )\r\n    vector conf = < 20, -40, 30 > // float next to the player\'s weapon\r\n\r\n    int attachIndex = weapon.LookupAttachment( "muzzle_flash" )\r\n    entity anchor = CreateClientSidePropDynamic( weapon.GetAttachmentOrigin( attachIndex ) + fwd * conf.x + right * conf.y + up * conf.z, <0,0,0>, $"models/dev/empty_model.mdl") // props need a model but this one is invisible so we don\'t need to set visibility manually\r\n    var topo = Worldspace_CreateRUITopology( <0,0,0>, <0,90,0>, 128, 64 ) // origin <0,0,0> so the topo sits at the origin of the prop\r\n\r\n    var tm_box = RuiCreate( $"ui/helmet_scanning_percentbar.rpak", topo, RUI_DRAW_WORLD, 0 )\r\n    RuiSetString( tm_box, "stage3TextTop", "Top" )\r\n    RuiSetString( tm_box, "stage3TextBottom", "Bottom" )\r\n\r\n    anchor.SetParent( weapon )\r\n    RuiTopology_SetParent( topo, anchor )\r\n}\n'})})]})}function d(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>s,x:()=>a});var t=n(6540);const r={},i=t.createContext(r);function s(e){const o=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:o},e.children)}}}]);