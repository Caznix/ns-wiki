"use strict";(self.webpackChunkns_wiki=self.webpackChunkns_wiki||[]).push([[6985],{5680:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>y});var r=t(6540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=r.createContext({}),s=function(e){var n=r.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=s(e.components);return r.createElement(u.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},f=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=s(t),f=a,y=p["".concat(u,".").concat(f)]||p[f]||d[f]||i;return t?r.createElement(y,o(o({ref:n},c),{},{components:t})):r.createElement(y,o({ref:n},c))}));function y(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=f;var l={};for(var u in n)hasOwnProperty.call(n,u)&&(l[u]=n[u]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},7041:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var r=t(8168),a=(t(6540),t(5680));const i={},o="Functions & Closures",l={unversionedId:"squirrel/functions",id:"squirrel/functions",isDocsHomePage:!1,title:"Functions & Closures",description:"Functions are an integral part of any programming language. They allow",source:"@site/docs/squirrel/functions.md",sourceDirName:"squirrel",slug:"/squirrel/functions",permalink:"/ns-wiki/docs/squirrel/functions",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/squirrel/functions.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Stack",permalink:"/ns-wiki/docs/squirrel/cpp_api/stack"},next:{title:"index",permalink:"/ns-wiki/docs/squirrel/index"}},u=[{value:"Declaring Functions",id:"declaring-functions",children:[]},{value:"Returning Data",id:"returning-data",children:[]},{value:"Parameters",id:"parameters",children:[]},{value:"Optional parameters",id:"optional-parameters",children:[]},{value:"vargs",id:"vargs",children:[]},{value:"Closures",id:"closures",children:[]}],s={toc:u},c="wrapper";function p(e){let{components:n,...t}=e;return(0,a.yg)(c,(0,r.A)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"functions--closures"},"Functions & Closures"),(0,a.yg)("p",null,"Functions are an integral part of any programming language. They allow\nto repeat blocks of code whenever and however often is needed."),(0,a.yg)("h2",{id:"declaring-functions"},"Declaring Functions"),(0,a.yg)("p",null,"Functions in squirrel are defined with this syntax:\n",(0,a.yg)("inlineCode",{parentName:"p"},"<return type> function <name>(<parameters>) <body>")),(0,a.yg)("p",null,"For example, a simple function that returns either ",(0,a.yg)("inlineCode",{parentName:"p"},"true")," or ",(0,a.yg)("inlineCode",{parentName:"p"},"false"),"\nwould look like this:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"bool function CoinFlip()\n{\n  return RandomInt( 2 ) == 0 // generate a random number from 0 - 1\n}\n")),(0,a.yg)("p",null,'It is not possible to have multiple functions that share the same name\n(often called \\"overriding\\" functions). Every function needs to have an\nunique name from any global or local variable or function.'),(0,a.yg)("h2",{id:"returning-data"},"Returning Data"),(0,a.yg)("p",null,"If you need some data after a function is finished (for example after a\ncalculation), you need to return that data."),(0,a.yg)("p",null,"You can return anything, however the type of the returned variable needs\nto match with the return type of the function."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'string function GetNorthstarName()\n{\n return "Northstar" // this would be valid\n return 1 // this would be invalid because the function needs to return a string\n}\n')),(0,a.yg)("p",null,"Keep in mind that no code after a return statement will get executed."),(0,a.yg)("p",null,"If you don\\'t want to return any value, use ",(0,a.yg)("inlineCode",{parentName:"p"},"void")," as the return type.\nThis indicates that your function returns ",(0,a.yg)("inlineCode",{parentName:"p"},"null"),"."),(0,a.yg)("p",null,"If nothing is returned by a function, ",(0,a.yg)("inlineCode",{parentName:"p"},"null")," will get returned\nimplicitly."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"void function ReturnNull()\n{\n  // return null regardless what happens, this all does the same\n  switch( RandomInt( 3 ) )\n  {\n    case 0:\n      return\n    case 1:\n      return null\n  }\n\n  // only if a 2 was rolled, code here will be executed before the other paths already returned.\n  // because a return statement is lacking, null is getting returned implicitly.\n}\n")),(0,a.yg)("p",null,"In ",(0,a.yg)("inlineCode",{parentName:"p"},"untyped")," files you may leave out the return type. In those cases the\nreturn type will default to ",(0,a.yg)("inlineCode",{parentName:"p"},"var"),"."),(0,a.yg)("h2",{id:"parameters"},"Parameters"),(0,a.yg)("p",null,"Parameters are the input a function gets when called. They are local\nvariables whose values come from the calling function."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"void function main()\n{\n int refcount = 0\n refcount = IncreaseRefcount( refcount )\n Assert( refcount == 1 )\n}\n\nint function IncreaseRefcount( int n )\n{\n return n + 1\n}\n")),(0,a.yg)("h2",{id:"optional-parameters"},"Optional parameters"),(0,a.yg)("p",null,"Sometimes you need parameters that are optional for a function, like\nextra options. If a parameter name is followed by ",(0,a.yg)("inlineCode",{parentName:"p"},"= <default-value>"),",\nthat parameter is not required to call the function."),(0,a.yg)("p",null,"Optional parameters need to be the last parameters of a function."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"void function main()\n{\n array a = [ 1, 2, 3, 4 ]\n PopN( a )\n PopN( a, 2 )\n\n Assert( a.len() == 1 )\n}\n\nvoid function PopN( array arr, int n = 1 )\n{\n for ( int i; i < n; i++ )\n {\n   arr.pop()\n }\n}\n")),(0,a.yg)("h2",{id:"vargs"},"vargs"),(0,a.yg)("p",null,"With vargs you can pass a function an unlimited amount of parameters.\nThe parameters will be inside a pseudo array called ",(0,a.yg)("inlineCode",{parentName:"p"},"vargv"),". The length\nof the vargs the function receives will be stored inside a variable\ncalled ",(0,a.yg)("inlineCode",{parentName:"p"},"vargc"),"."),(0,a.yg)("p",null,"You can denote a function to have vargs with adding ",(0,a.yg)("inlineCode",{parentName:"p"},"...")," to the end of\nthe parameter list."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"string function CombineStuff( string base, ... )\n{\n string s = base\n for ( int i; i < argc; i++ )\n {\n   base += vargv[i].tostring()\n }\n}\n")),(0,a.yg)("h2",{id:"closures"},"Closures"),(0,a.yg)("p",null,"Closures are functions that are anonymous (unnamed) functions created in\na specific script context that can use variables from the parent scope."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'void function main()\n{\n void functionref() fn = void function(){ print( "I\'m a closure" ) } // create a closure\n fn() // call the closure\n}\n')),(0,a.yg)("p",null,"Closures can capture variables from their parent scope."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'void function PlayFXOnEntity( entity ent )\n{\n   int fxHandle = StartParticleEffectOnEntity( ent, PILOT_THROWN_TICK_WARNING, FX_ATTACH_POINT_FOLLOW, ent.LookupAttachment( "head_base" )\n   OnThreadEnd( void function() : ( fxHandle ){ EffectStop( fxHandle, false, true ) } ) // create a function to stop the fx effect and give it the fx handle it needs\n   ent.EndSignal( "OnDestroy" ) // stop the thread when the entity dies\n   WaitForever()\n}\n')))}p.isMDXComponent=!0}}]);